<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">
    <title>TOP</title>

    <!-- Bootstrap core CSS -->
    <script src="/js/jquery-1.10.2.min.js"></script>
    <script src="/js/bs3.0.3/bootstrap.min.js"></script>
    <link rel='stylesheet' href='/css/bs3.0.3/bootstrap.css' />

    <!-- Custom styles for this template -->
    <link rel='stylesheet' href='/css/style.css' />

    <!-- icons from glyphicons -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet" />



    <!-- socket.IO -->
    <script type="text/javascript" src="../socket/pushMessage.js"></script>
    <script src="../socket/pushMessage.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
      var socket = io.connect('http://localhost:3000');
      socket.on('connect', function(msg) {
                console.log("connet");
                document.getElementById("connectId").innerHTML =
                "あなたの接続ID::" + socket.socket.transport.sessid;
                document.getElementById("type").innerHTML =
                "接続方式::" + socket.socket.transport.name;
                });
                
                var i = 1;
                
                // メッセージを受けたとき
                socket.on('message', function(msg) {
                          // メッセージを画面に表示する
                          document.getElementById("receiveMsg").innerHTML = msg.value;
                          });
                          
                          // メッセージを送る
                          function SendMsg() {
                            var msg = document.getElementById("message" + 1).value;
                            // メッセージを発射する
                            socket.emit('message', { value: msg });
                          }
    
    function SendMsg2() {
      var msg = document.getElementById("message" + 2).value;
      // メッセージを発射する
      socket.emit('message', { value: msg });
    }
    
    
    // 切断する
    function DisConnect() {
      var msg = socket.socket.transport.sessid + "は切断しました。";
      // メッセージを発射する
      socket.emit('message', { value: msg });
      // socketを切断する
      socket.disconnect();
    }
    </script>

    
    
    



  </head>

  <body class="top-margin70">
    
    <!-- ナビゲーションバー -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-th"></span> Rental Manage</a>
        </div>

        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav pull-right">
            <li class="nav-divider"></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span><%= page.user_account %><b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#user_setting"><span class="glyphicon glyphicon-edit"></span> ユーザー設定の変更</a></li>
                  <li><a href="#service_setting"><span class="glyphicon glyphicon-check"></span> サービス設定の変更</a></li>
                  <li><a href="#logout"><span class="glyphicon glyphicon-off"></span> ログアウト</a></li>
                </ul>
            </li>
          </ul>
        </div>

      </div>
    </div>

    <!-- メインコンテンツ -->
    <div class="container">
      
      
      <div id="connectId"></div>
      <div id="type"></div>
      <br>
      <input type="text" id= <%= "message" + "1" %> value="">
        <input type="button" value="メッセージを送る" onclick="SendMsg()">
          <input type="text" id="message2" value="">
            <input type="button" value="メッセージを送る2" onclick="SendMsg2()">
              
              <input type="button" value="切断する" onclick="DisConnect()">
                <div id="receiveMsg"></div>
      
      
    
      <div class="row">
        <div class="col col-sm-2">
        </div>
        
        <div class="col col-sm-6">
          <!-- TOP検索 -->
          <form action="/top" method="post" class="form-inline center";>
              <div class="form-group">
                <input class="form-control input-sm" type="text" name="keyword" placeholder="キーワード">
              </div>
              <button type="submit" class="btn btn-primary btn-sm left">検索</button>
          </form>
        </div>

        <div class="col col-sm-4">
          <!-- TOPカート -->
          <form action="/top" method="post" class="search-inline form-inline right under-margin20";>
            <button class="btn btn btn-success btn-sm"><span class="glyphicon glyphicon-shopping-cart"></span> カート</button>
          </form>
        </div>

      </div>
      
      <div class="row">
        <!-- TOP画面左 -->
        <div class="col col-sm-2">
          <!-- TOP画面ユーザーメニュー -->
          <ul><li>
            <ul>
              <li><a href="#home" class="toplist-home"><span class="glyphicon glyphicon-home"></span><b> home</b></a></li>
            </ul>
            <ul>
              <li><span class="toplist-category"><b>　カテゴリ</b></span></li>
              <li><a href="#items" class="toplist">　　- 大皿</a></li>
              <li><a href="#reports" class="toplist">　　- その他</a></li>
            </ul>
          </ul></li>
        </div>

        <!-- TOP画面右 -->
        <div class="col col-sm-10">
            
            <!-- 検索結果のid数でループ -->
            <ul class="thumbnails">
                <% for(var i=0; i<page.data.length; i++) {%>
                    <li class="col col-sm-3">
                        <div class="thumbnail">
                            <p>No.<%= page.data[i].id %></p>
                            <img src= <%= "/img/item_img/item_id_" + page.data[i].item_id + ".jpg" %> alt="">
                                <div class="caption">
                                    <p><%= page.data[i].item_name %></p>
                                    <p><%= page.data[i].item_description %></p>
                                    <button_add><a href="#add" class="btn btn-primary btn-sm">カートへ</a></a></button_add>
                                </div>
                        </div>
                    </li>
                <% } %>

            </ul>

        </div>
      </div>
    </div>
    
  </body>
</html>

